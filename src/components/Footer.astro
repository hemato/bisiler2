---
import { getLangFromUrl } from '../i18n/utils';
import { Linkedin, Mail, Phone } from 'lucide-react';
import { COMPANY_INFO } from '../config/company';
import { CONTACT_INFO } from '../config/contact';
import { DOMAIN_CONFIG, getRouteUrl } from '../config/domain';
import { getRoute } from '../utils/routes';

const lang = getLangFromUrl(Astro.url);

const translations = lang === 'en' 
  ? await import('../i18n/en.json')
  : await import('../i18n/tr.json');

const t = translations.default;
const currentYear = new Date().getFullYear();
---

<footer class="bg-secondary-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
      <!-- Company Info -->
      <div class="md:col-span-2">
        <h3 class="text-2xl font-bold text-white mb-4">{COMPANY_INFO.name}</h3>
        <p class="text-secondary-300 mb-6 max-w-md">
          {t.footer.description}
        </p>
        <div class="flex space-x-4">
          <a href={CONTACT_INFO.social.linkedin} class="text-secondary-400 hover:text-white transition-colors">
            <Linkedin className="w-5 h-5" />
          </a>
          <a href={`mailto:${CONTACT_INFO.email.primary}`} class="text-secondary-400 hover:text-white transition-colors">
            <Mail className="w-5 h-5" />
          </a>
          <a href={`tel:${CONTACT_INFO.phone.primary.replace(/\s/g, '')}`} class="text-secondary-400 hover:text-white transition-colors">
            <Phone className="w-5 h-5" />
          </a>
        </div>
      </div>

      <!-- Quick Links -->
      <div>
        <h4 class="text-lg font-semibold text-white mb-4">
          {lang === 'en' ? 'Quick Links' : 'Hızlı Bağlantılar'}
        </h4>
        <ul class="space-y-2">
          <li><a href={getRoute(lang, 'services')} class="text-secondary-300 hover:text-white transition-colors">{t.nav.services}</a></li>
          <li><a href={getRoute(lang, 'about')} class="text-secondary-300 hover:text-white transition-colors">{t.nav.about}</a></li>
          <li><a href={getRoute(lang, 'references')} class="text-secondary-300 hover:text-white transition-colors">{t.nav.references}</a></li>
          <li><a href={getRoute(lang, 'contact')} class="text-secondary-300 hover:text-white transition-colors">{t.nav.contact}</a></li>
        </ul>
      </div>

      <!-- Contact Info -->
      <div>
        <h4 class="text-lg font-semibold text-white mb-4">
          {lang === 'en' ? 'Contact' : 'İletişim'}
        </h4>
        <div class="space-y-2 text-secondary-300">
          <p>{CONTACT_INFO.email.primary}</p>
          <p>{CONTACT_INFO.phone.primary}</p>
          <p>{CONTACT_INFO.address.city}, {CONTACT_INFO.address.countryName[lang]}</p>
        </div>
      </div>
    </div>

    <div class="border-t border-secondary-800 mt-12 pt-8">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <p class="text-secondary-400 text-sm">
          © {currentYear} {COMPANY_INFO.name}. {t.footer.rights}
        </p>
        <div class="flex space-x-6 mt-4 md:mt-0">
          <a href={getRoute(lang, 'privacy')} class="text-secondary-400 hover:text-white text-sm transition-colors">
            {lang === 'en' ? 'Privacy Policy' : 'Gizlilik Politikası'}
          </a>
          <a href="#" class="text-secondary-400 hover:text-white text-sm transition-colors">
            {lang === 'en' ? 'Cookie Policy' : 'Çerez Politikası'}
          </a>
          <a href="#" class="text-secondary-400 hover:text-white text-sm transition-colors">
            {lang === 'en' ? 'Terms of Service' : 'Kullanım Şartları'}
          </a>
        </div>
      </div>
    </div>
  </div>
</footer>
